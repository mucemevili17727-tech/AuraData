import React, { useState, useEffect, useRef } from 'react';
import { 
  Shield, 
  Map, 
  Layers, 
  Zap, 
  Smartphone, 
  Lock, 
  CheckCircle, 
  Users, 
  Building2, 
  Search,
  Cpu,
  TrendingUp,
  Fingerprint,
  ChevronDown,
  ArrowRight 
} from 'lucide-react';

// --- AuraData Logo Component (Official Full Vector Source) ---
const AuraLogo = ({ className }) => (
  <svg 
    viewBox="0 0 2405.56 854.91" 
    className={className} 
    xmlns="http://www.w3.org/2000/svg"
  >
    <g>
      {/* 1. 中文 Slogan (白色) */}
      <g fill="#ffffff">
        <polygon points="893.4 596.92 918.41 596.92 924.09 618.52 931.48 618.52 931.48 641.07 902.87 641.07 893.4 596.92"/>
        <polygon points="1064.68 605.92 1089.69 605.92 1095.38 623.91 1102.77 623.91 1102.77 642.68 1074.16 642.68 1064.68 605.92"/>
        <polygon points="891.69 572.29 891.69 564.14 925.99 564.14 925.99 545.58 891.69 545.58 891.88 537.43 878.81 537.43 865.74 537.43 865.93 545.58 831.63 545.58 831.63 564.14 865.93 564.14 865.93 572.29 826.89 572.29 826.89 593.51 865.93 593.51 865.93 642.78 878.81 642.78 891.69 642.78 891.69 593.51 930.73 593.51 930.73 572.29 891.69 572.29"/>
        <polygon points="864.22 596.92 839.21 596.92 833.53 618.52 826.14 618.52 826.14 641.07 854.75 641.07 864.22 596.92"/>
        <polygon points="1069.61 563.01 1095.76 563.01 1091.97 580.63 1066.96 580.63 1069.61 563.01"/>
        <polygon points="1036.51 605.92 1011.5 605.92 1005.82 623.91 998.43 623.91 998.43 642.68 1027.04 642.68 1036.51 605.92"/>
        <polygon points="1063.93 582.52 1063.93 561.11 1100.12 561.11 1100.12 542.73 1064.68 542.73 1064.68 537.43 1051.48 537.43 1049.72 537.43 1036.51 537.43 1036.51 542.73 1001.08 542.73 1001.08 561.11 1037.27 561.11 1037.27 582.52 998.43 582.52 998.43 603.36 1037.27 603.36 1037.27 642.78 1049.72 642.78 1051.48 642.78 1063.93 642.78 1063.93 603.36 1102.77 603.36 1102.77 582.52 1063.93 582.52"/>
        <polygon points="1031.59 563.01 1005.44 563.01 1009.23 580.63 1034.24 580.63 1031.59 563.01"/>
        <path d="M1213.99,537.43h-42.95v105.25h22.23v-11.84l3.54,2.27h17.18v-45.98l-5.31-4.55,5.31-3.79v-41.37ZM1195.67,613.79h-6.06v-23.68h6.06v23.68ZM1195.67,575.39h-6.06v-21.6h6.06v21.6Z"/>
        <path d="M1216.26,538.88v102.82h57.91v-102.82h-57.91ZM1252.39,623.13h-15.92v-24.63h15.92v24.63ZM1252.39,580.56h-15.92v-23.24h15.92v23.24Z"/>
        <polygon points="1346.05 543.49 1368.79 543.49 1375.04 572.48 1349.84 572.48 1346.05 543.49"/>
        <polygon points="1418.05 543.49 1443.63 543.49 1440.41 572.48 1414.64 572.48 1418.05 543.49"/>
        <polygon points="1341.13 575.7 1381.29 575.7 1381.29 537.81 1409.34 537.81 1409.34 575.7 1448.18 575.7 1448.18 597.68 1422.03 597.68 1422.03 621.18 1427.9 621.18 1427.9 611.89 1448.18 611.89 1448.18 642.4 1396.64 642.4 1396.64 596.92 1388.87 596.92 1379.59 642.4 1342.83 642.4 1342.83 618.14 1357.42 618.14 1363.86 596.92 1341.13 596.92 1341.13 575.7"/>
        <polygon points="1515.63 539.7 1530.22 539.7 1531.55 555.43 1517.53 555.43 1515.63 539.7"/>
        <polygon points="1555.17 539.7 1570.83 539.7 1567.67 554.8 1553.78 554.8 1555.17 539.7"/>
        <polygon points="1515.63 557.32 1533.57 557.32 1533.57 537.81 1550.75 537.81 1550.75 556.69 1570.33 556.69 1570.33 571.22 1550.62 571.22 1550.62 590.1 1534.33 590.1 1534.33 571.22 1515.63 571.22 1515.63 557.32"/>
        <polygon points="1520.68 572.48 1518.79 576.4 1514.49 576.4 1514.49 590.1 1528.39 590.1 1533.19 579.55 1533.19 572.48 1520.68 572.48"/>
        <polygon points="1552.01 572.48 1565.15 572.48 1565.15 576.4 1570.83 576.4 1570.83 590.1 1556.05 590.1 1552.01 579.18 1552.01 572.48"/>
        <path d="M1567.8,610.88h5.68v-15.54h-5.68v-3.66h-18.44v3.79h-14.4v-3.79h-16.67v4.17h-3.79v14.91h3.03v10.23l10.61,6.82h-13.14v14.59h20.59l8.21-5.49,8.21,6.06h18.32v-15.66h-11.49l8.97-6.69v-9.73ZM1542.92,618.59l-9.73-7.83h17.94l-8.21,7.83Z"/>
        <polygon points="1578.25 537.81 1598.24 537.81 1596.35 543.3 1620.13 543.3 1620.13 560.35 1591.23 560.35 1591.23 568.12 1571.62 568.12 1571.62 552.96 1575.6 552.96 1578.25 537.81"/>
        <path d="M1573.48,570.87h18.51l3.88,8.43,5.78-15.35h19.42l-14.68,38.65,7.96,20.27h5.78v20.08s-16.72.14-16.86,0-6.63-16.01-6.63-16.01l-6.54,16.58h-17.24v-19.99h4.45l9.19-19.8-13.01-32.87Z"/>
        <polygon points="1686.54 548.32 1693.26 548.32 1693.26 538.66 1712.21 538.66 1712.21 548.32 1717.52 548.32 1717.52 565.56 1712.49 565.56 1712.49 583.28 1717.52 583.28 1717.52 602.32 1712.59 602.32 1712.59 642.78 1687.01 642.78 1687.01 622.31 1693.17 622.31 1693.17 607.53 1686.54 607.53 1686.54 587.64 1692.88 587.64 1692.88 565.66 1686.54 565.66 1686.54 548.32"/>
        <polygon points="2030.43 548.32 2037.88 548.32 2037.88 538.66 2058.85 538.66 2058.85 548.32 2064.73 548.32 2064.73 565.56 2059.17 565.56 2059.17 583.28 2064.73 583.28 2064.73 602.32 2059.27 602.32 2059.27 642.78 2030.96 642.78 2030.96 622.31 2037.77 622.31 2037.77 607.53 2030.43 607.53 2030.43 587.64 2037.46 587.64 2037.46 565.66 2030.43 565.66 2030.43 548.32"/>
        <path d="M1791.38,575.01v-35.12h-71.49v81.85l-4.55.38v21.51l21.85-5.21v-43.07h15.41v6.57h-13.52v40.04h51.16v-39.79h-16.04v-6.82h17.18v-14.78h-17.31v-5.56h17.31ZM1738.45,553.66h31.71v7.83h-31.71v-7.83ZM1752.73,581.07h-15.54v-6.32h15.54v6.32ZM1772.18,628.06h-16.29v-11.87h16.29v11.87Z"/>
        <path d="M1882.7,537.24l-2.65,3.79h-22.36v15.28h10.36v5.68h-10.36v17.18h14.02v63.16h17.43v-62.91h12.76s.25-16.93,0-16.93h-10.36v-7.07h8.84l4.8-18.19h-22.48Z"/>
        <polygon points="1858.96 581.07 1870.14 581.07 1870.14 639.93 1858.96 644.58 1858.96 581.07"/>
        <polygon points="1890.88 581.07 1901.21 581.07 1901.21 644.58 1890.88 640.41 1890.88 581.07"/>
        <polygon points="1906.14 539.32 1924.7 539.32 1931.24 568.31 1913.53 568.31 1906.14 539.32"/>
        <path d="M1906.14,570.68h17.62l6.82,27.95h-18.19l-6.25-27.95Z"/>
        <path d="M1903.17,600.78h30.82v-62.91h21.22v62.91h8.72v17.56h-8.84v24s-21.85,0-21.54,0,0-24,0-24h-30.38v-17.56Z"/>
        <polygon points="2087.84 537.24 2087.84 545.58 2066.81 545.58 2066.81 564.71 2087.84 564.71 2087.84 572.48 2066.81 572.48 2066.81 592 2105.27 592 2099.78 598.63 2096.94 595.22 2066.81 595.22 2085.19 613.79 2077.99 620.8 2064.73 620.8 2064.73 642.78 2091.06 642.78 2101.67 631.03 2112.09 642.78 2136.73 642.78 2136.73 620.8 2122.89 620.8 2116.26 614.16 2134.83 595.6 2134.83 572.1 2113.04 572.1 2113.04 563.76 2135.21 563.76 2135.21 545.58 2112.28 545.58 2112.28 537.24 2087.84 537.24"/>
      </g>

      {/* 2. "Data" 中的 'D' 和 't' (蓝色) */}
      <path fill="#00a0f9" d="M1514.06,258.68h69.51c77.39,0,125.32,34.12,125.32,106.41s-47.94,107.86-122.58,107.86h-72.25v-214.27ZM1580.49,438.54c47.25,0,76.7-21.4,76.7-73.45s-29.45-72-76.7-72h-15.75v145.45h15.75Z"/>
      <path fill="#00a0f9" d="M1902.46,415.83v-72.27h-23.02v-31.76l25.35-2.04-.22-44h40.72v44h40.21v33.8h-40.21v72.27c0,18.65,7.58,27.39,22.15,27.39,5.25,0,11.66-1.75,16.03-3.5l6.99,31.18c-8.74,2.91-20.11,6.12-34.38,6.12-38.76,0-53.62-24.77-53.62-61.19Z"/>
      
      {/* 3. "Aura" 文字 (白色) */}
      <g fill="#ffffff">
        <path d="M903.76,257.66h39.16l97.01,216.51h-48.51l-21.22-48.51h-93.47l-20.46,48.51-46.97-1.22,94.46-215.28ZM893.84,388.98l59.61-1.72-6.27-15.8c-8.17-20.24-15.28-42.59-22.74-63.63h-1.78c-6.75,21.3-14.57,43.38-22.39,63.63l-6.43,17.52Z"/>
        <path d="M1047.96,410.96v-103.23h44.68v97.63c0,25.37,7.29,34.51,23.71,34.51,13.98,0,23.1-5.9,34.65-20.65v-111.49h44.68v165.17h-38.91l-.91-23.6h-1.22c-14.59,16.81-31,27.73-54.1,27.73-36.78,0-52.58-24.78-52.58-66.07Z"/>
        <path d="M1231.93,307.72h42.25v34.82s22.93-40.42,54.51-38.91v44.21s-41.31-3.34-54.51,46.71v79.61h-42.25v-166.44Z"/>
        <path d="M1467.75,326.35c-17.2-20.52-51.82-37.39-119.87-5.02l14.65,33.35s45.22-28.8,74.78,0c0,0,7.33,7.83,6.82,24.76,0,0-65.94-26.53-100.04,16.42,0,0-26.02,47.32,23.24,77.09,0,0,46.99,16.63,75.54-17.22v18.44h40.93v-102.7c0-16.44-5.49-32.52-16.05-45.12ZM1442.12,424.15s-10.39,26.21-45.5,21.58c-7.66-1.01-14.32-6.02-17.06-13.25-.05-.13-.1-.26-.14-.39-3.2-8.88-.45-18.89,6.85-24.87,8.57-7.03,25.13-12.94,55.86-2.77v19.71Z"/>
      </g>

      {/* 4. "Data" 中的 'a' 和 'a' (蓝色) */}
      <path fill="#00a0f9" d="M1851.4,326.35c-17.2-20.52-51.82-37.39-119.87-5.02l14.65,33.35s45.22-28.8,74.78,0c0,0,7.33,7.83,6.82,24.76,0,0-65.94-26.53-100.04,16.42,0,0-26.02,47.32,23.24,77.09,0,0,46.99,16.63,75.54-17.22v18.44h40.93v-102.7c0-16.44-5.49-32.52-16.05-45.12ZM1825.77,424.15s-10.39,26.21-45.5,21.58c-7.66-1.01-14.32-6.02-17.06-13.25-.05-.13-.1-.26-.14-.39-3.2-8.88-.45-18.89,6.85-24.87,8.57-7.03,25.13-12.94,55.86-2.77v19.71Z"/>
      <path fill="#00a0f9" d="M2127.66,326.35c-17.2-20.52-51.82-37.39-119.87-5.02l14.65,33.35s45.22-28.8,74.78,0c0,0,7.33,7.83,6.82,24.76,0,0-65.94-26.53-100.04,16.42,0,0-26.02,47.32,23.24,77.09,0,0,46.99,16.63,75.54-17.22v18.44h40.93v-102.7c0-16.44-5.49-32.52-16.05-45.12ZM2102.02,424.15s-10.39,26.21-45.5,21.58c-7.66-1.01-14.32-6.02-17.06-13.25-.05-.13-.1-.26-.14-.39-3.2-8.88-.45-18.89,6.85-24.87,8.57-7.03,25.13-12.94,55.86-2.77v19.71Z"/>
      
      {/* 5. Logo 图标 (蓝色原子结) */}
      <g fill="#00a0f9">
        <g>
          <polygon points="465.34 553.88 407.74 591.82 382.58 569.91 396.22 517.36 404.81 508.82 465.34 553.88"/>
          <polygon points="465.34 553.88 522.93 591.82 548.1 569.91 534.46 517.36 525.87 508.82 465.34 553.88"/>
        </g>
        <path d="M214.73,573.71c37.89,79.33,135.92,49.01,135.92,49.01,32.84,100.55,112.67,93.98,112.67,93.98,92.97,2.02,118.74-93.98,118.74-93.98,93.98,27.79,132.88-41.94,132.88-41.94,49.52-97.52-36.38-151.58-36.38-151.58l-213.22-129.85-224.84,141.47c-68.72,59.62-25.77,132.88-25.77,132.88ZM288.98,488.33l176.36-112.19,186.44,115.71s28.29,16.95,6.57,54.2c0,0-19.2,30.68-54.06,15.02l-68.72-44.46s-2.02,133.39-68.72,134.4c0,0-62.65,11.62-70.23-134.4l-63.67,40.81c-9.81,6.29-21.68,8.76-33.09,6.41-9.44,1.94-19.56-7.29-26.52-19.93,0,0-2.96-4.79-4.18-12.74-2.58-16.89,5.41-33.65,19.82-42.82Z"/>
        <g>
          <polygon points="465.34 299.35 407.74 261.4 382.58 283.32 396.22 335.86 404.81 344.41 465.34 299.35"/>
          <polygon points="465.34 299.35 522.93 261.4 548.1 283.32 534.46 335.86 525.87 344.41 465.34 299.35"/>
        </g>
        <path d="M717.06,278.77c-37.89-79.33-135.92-49.01-135.92-49.01-32.84-100.55-112.67-93.98-112.67-93.98-92.97-2.02-118.74,93.98-118.74,93.98-93.98-27.79-132.88,41.94-132.88,41.94-49.52,97.52,36.38,151.58,36.38,151.58l213.22,129.85,224.84-141.47c68.72-59.62,25.77-132.88,25.77-132.88ZM642.81,364.14l-176.36,112.19-186.44-115.71s-28.29-16.95-6.57-54.2c0,0,19.2-30.68,54.06-15.02l68.72,44.46s2.02-133.39,68.72-134.4c0,0,62.65-11.62,70.23,134.4l63.67-40.81c9.81-6.29,21.68-8.76,33.09-6.41,9.44,1.94,19.56,7.29,26.52,19.93,0,0,2.96,4.79,4.18,12.74-2.58-16.89-5.41,33.65-19.82,42.82Z"/>
      </g>
    </g>
  </svg>
);

// --- Particle Background Component ---
const ParticleBackground = () => {
  const canvasRef = useRef(null);

  useEffect(() => {
    const canvas = canvasRef.current;
    const ctx = canvas.getContext('2d');
    let width = window.innerWidth;
    let height = window.innerHeight;
    canvas.width = width;
    canvas.height = height;

    const particles = [];
    const particleCount = 40; 

    class Particle {
      constructor() {
        this.x = Math.random() * width;
        this.y = Math.random() * height;
        this.vx = (Math.random() - 0.5) * 0.3;
        this.vy = (Math.random() - 0.5) * 0.3;
        this.size = Math.random() * 2 + 1;
        this.opacity = Math.random() * 0.5 + 0.1;
      }
      update() {
        this.x += this.vx;
        this.y += this.vy;
        if (this.x < 0 || this.x > width) this.vx *= -1;
        if (this.y < 0 || this.y > height) this.vy *= -1;
      }
      draw() {
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
        ctx.fillStyle = `rgba(0, 160, 249, ${this.opacity})`; // AuraBlue
        ctx.fill();
      }
    }

    for (let i = 0; i < particleCount; i++) particles.push(new Particle());

    const animate = () => {
      ctx.clearRect(0, 0, width, height);
      particles.forEach(p => { p.update(); p.draw(); });
      for (let i = 0; i < particleCount; i++) {
        for (let j = i + 1; j < particleCount; j++) {
          const dx = particles[i].x - particles[j].x;
          const dy = particles[i].y - particles[j].y;
          const dist = Math.sqrt(dx * dx + dy * dy);
          if (dist < 100) {
            ctx.beginPath();
            ctx.strokeStyle = `rgba(0, 160, 249, ${0.05})`;
            ctx.lineWidth = 1;
            ctx.moveTo(particles[i].x, particles[i].y);
            ctx.lineTo(particles[j].x, particles[j].y);
            ctx.stroke();
          }
        }
      }
      requestAnimationFrame(animate);
    };
    animate();

    const handleResize = () => {
      width = window.innerWidth;
      height = window.innerHeight;
      canvas.width = width;
      canvas.height = height;
    };
    window.addEventListener('resize', handleResize);
    return () => window.removeEventListener('resize', handleResize);
  }, []);

  return <canvas ref={canvasRef} className="fixed top-0 left-0 w-full h-full pointer-events-none z-0" />;
};

// --- Main App Component ---
export default function App() {
  const [viewMode, setViewMode] = useState('home'); // 'home' (long scroll) or 'config' (tool)
  const [modules, setModules] = useState({
    base: true,
    profile: false,
    assets: false,
    consumption: false,
    behavior: false,
    expert: false,
  });
  
  const [reportDirection, setReportDirection] = useState('');
  const [showResult, setShowResult] = useState(false); // Inside config view

  // Prices
  const PRICES = {
    base: 400,
    profile: 100,
    assets: 200,
    consumption: 400,
    behavior: 500,
    expert: 3000,
  };

  const totalPrice = Object.keys(modules).reduce((sum, key) => modules[key] ? sum + PRICES[key] : sum, 0);
  const discount = 0.5;
  const finalPrice = totalPrice * discount;
  const isEnterprise = finalPrice >= 30000 || modules.expert;

  const toggleModule = (key) => {
    if (key === 'base') return;
    setModules(prev => ({ ...prev, [key]: !prev[key] }));
  };

  const startConfig = () => {
    setViewMode('config');
    setShowResult(false);
    window.scrollTo({ top: 0, behavior: 'smooth' });
  };

  const handleLandingStart = () => {
    if(!reportDirection) {
      alert("请输入您感兴趣的报告方向");
      return;
    }
    startConfig();
  };

  // --- Long Scroll Sections ---

  const HeroSection = () => (
    <div className="relative min-h-screen flex flex-col items-center justify-center text-center px-4 pt-20">
      <div className="animate-fade-in-up flex flex-col items-center">
        {/* Large Logo placed above slogan */}
        <div className="w-80 md:w-[500px] mb-8 drop-shadow-[0_0_20px_rgba(0,160,249,0.25)]">
          <AuraLogo className="w-full h-auto" />
        </div>

        <div className="inline-block px-4 py-1 mb-6 text-xs font-semibold tracking-wider text-cyan-400 uppercase bg-cyan-900/30 border border-cyan-500/50 rounded-full">
          Trusted by Top Internet Ecosystems
        </div>
        <h1 className="text-4xl md:text-6xl font-bold text-white tracking-tight mb-6 drop-shadow-glow">
          数据驱动决策
        </h1>
        <p className="text-xl md:text-2xl text-slate-300 font-light mb-10 max-w-2xl mx-auto">
          让每一个商业决策都拥有<span className="text-cyan-400 font-semibold">全息视角</span>
        </p>
      </div>

      <div className="w-full max-w-lg bg-slate-800/80 backdrop-blur-md p-2 rounded-xl border border-slate-700 shadow-2xl flex flex-col md:flex-row gap-2 animate-fade-in-up delay-100 mb-8">
        <input 
          type="text" 
          placeholder="输入报告方向 (如: 杭州西湖区新能源车主画像)" 
          className="flex-1 bg-transparent text-white px-4 py-3 outline-none placeholder-slate-500"
          value={reportDirection}
          onChange={(e) => setReportDirection(e.target.value)}
        />
        <button 
          onClick={handleLandingStart}
          className="bg-cyan-500 hover:bg-cyan-400 text-white font-bold py-3 px-8 rounded-lg transition-all duration-300 flex items-center justify-center gap-2 whitespace-nowrap"
        >
          开始定制
        </button>
      </div>
      
      <div className="absolute bottom-10 animate-bounce cursor-pointer text-slate-500 hover:text-cyan-400 transition-colors"
           onClick={() => document.getElementById('grid-tech').scrollIntoView({behavior: 'smooth'})}>
        <div className="text-xs mb-2">了解核心技术</div>
        <ChevronDown size={24} className="mx-auto"/>
      </div>
    </div>
  );

  const GridTechSection = () => (
    <div id="grid-tech" className="min-h-screen flex items-center py-20 bg-slate-900/50 backdrop-blur-sm border-t border-slate-800">
      <div className="container mx-auto px-6 flex flex-col md:flex-row items-center gap-16">
        <div className="md:w-1/2 order-2 md:order-1 relative h-80 w-full bg-slate-800 rounded-2xl overflow-hidden border border-slate-700 shadow-[0_0_50px_rgba(0,160,249,0.1)] group">
             {/* Map Grid Visual */}
             <div className="absolute inset-0 bg-[linear-gradient(rgba(0,160,249,0.2)_1px,transparent_1px),linear-gradient(90deg,rgba(0,160,249,0.2)_1px,transparent_1px)] bg-[size:25px_25px]"></div>
             <div className="absolute top-1/2 left-1/2 w-40 h-40 bg-cyan-500/30 rounded-full blur-3xl transform -translate-x-1/2 -translate-y-1/2"></div>
             {/* Dynamic cells */}
             <div className="absolute top-1/3 left-1/3 w-6 h-6 bg-cyan-400 shadow-[0_0_10px_rgba(0,160,249,1)] animate-pulse"></div>
             <div className="absolute bottom-1/4 right-1/4 w-6 h-6 bg-blue-500 shadow-[0_0_10px_rgba(59,130,246,1)] animate-pulse delay-75"></div>
             <div className="absolute top-2/3 right-1/3 w-6 h-6 bg-cyan-600 shadow-[0_0_10px_rgba(0,160,249,1)] animate-pulse delay-150"></div>
        </div>
        <div className="md:w-1/2 order-1 md:order-2">
          <div className="flex items-center gap-3 mb-6">
            <div className="p-3 bg-cyan-500/10 rounded-lg">
              <Map className="text-cyan-400" size={32} />
            </div>
            <h2 className="text-3xl md:text-4xl font-bold text-white">时空网格技术 (The Grid System)</h2>
          </div>
          <p className="text-xl text-slate-300 leading-relaxed mb-6">
            我们将复杂的物理城市划分为 <span className="text-cyan-400 font-mono font-bold bg-cyan-900/30 px-2 rounded">100m x 100m</span> 的纳米级网格。
          </p>
          <p className="text-slate-400 leading-relaxed">
             传统报告只看“区县级”数据，而 AuraData 深入毛细血管。每一个网格都是一个独立的数据单元，实时计算其中的群体密度、停留时长与流动轨迹。我们不追踪“张三”去哪了，我们分析“这个网格里的人”在做什么。
          </p>
        </div>
      </div>
    </div>
  );

  const PurchasingPowerSection = () => (
    <div className="min-h-screen flex items-center py-20 bg-black/40 border-t border-slate-800">
      <div className="container mx-auto px-6 flex flex-col md:flex-row items-center gap-16">
        <div className="md:w-1/2">
          <div className="flex items-center gap-3 mb-6">
            <div className="p-3 bg-purple-500/10 rounded-lg">
              <TrendingUp className="text-purple-400" size={32} />
            </div>
            <h2 className="text-3xl md:text-4xl font-bold text-white">区域消费力指数 (PPI)</h2>
          </div>
          <h3 className="text-xl text-purple-200 mb-4">Purchasing Power Index</h3>
          <p className="text-slate-300 leading-relaxed mb-6">
            如何判断一个商圈的真实含金量？我们不仅仅统计人流量，更通过多维交叉模型计算“钱流量”。
          </p>
          <ul className="space-y-4">
             <li className="flex items-start gap-3">
               <div className="mt-1 w-2 h-2 rounded-full bg-purple-500"></div>
               <span className="text-slate-400"><strong className="text-white">资产锚定：</strong>结合网格内常驻人群的房产估值与车辆档次（BBA/新能源/经济型）。</span>
             </li>
             <li className="flex items-start gap-3">
               <div className="mt-1 w-2 h-2 rounded-full bg-purple-500"></div>
               <span className="text-slate-400"><strong className="text-white">消费频次：</strong>基于商场支付场景的高频数据，还原真实购买力。</span>
             </li>
             <li className="flex items-start gap-3">
               <div className="mt-1 w-2 h-2 rounded-full bg-purple-500"></div>
               <span className="text-slate-400"><strong className="text-white">预测模型：</strong>利用 AI 算法推演未来 6 个月的消费增长趋势。</span>
             </li>
          </ul>
        </div>
        <div className="md:w-1/2 relative">
             {/* Chart Visualization */}
             <div className="bg-slate-800 p-6 rounded-2xl border border-slate-700 shadow-2xl">
                <div className="flex justify-between items-end h-64 gap-4 px-4 pb-4 border-b border-slate-600">
                   {/* Bars */}
                   {[40, 65, 45, 80, 55, 90, 70].map((h, i) => (
                      <div key={i} className="w-full bg-slate-700 rounded-t relative group overflow-hidden">
                         <div style={{height: `${h}%`}} className="absolute bottom-0 w-full bg-gradient-to-t from-purple-900 to-purple-500 transition-all duration-1000 group-hover:to-purple-300"></div>
                      </div>
                   ))}
                </div>
                <div className="flex justify-between text-xs text-slate-500 mt-2 font-mono">
                   <span>MON</span><span>TUE</span><span>WED</span><span>THU</span><span>FRI</span><span>SAT</span><span>SUN</span>
                </div>
                <div className="mt-4 flex items-center justify-between">
                   <div className="text-white font-bold">区域消费热度</div>
                   <div className="text-purple-400 font-mono text-xl">High (8.9)</div>
                </div>
             </div>
        </div>
      </div>
    </div>
  );

  const DigitalLifeSection = () => (
    <div className="min-h-screen flex items-center py-20 bg-slate-900/50 border-t border-slate-800">
      <div className="container mx-auto px-6 flex flex-col md:flex-row-reverse items-center gap-16">
        <div className="md:w-1/2">
          <div className="flex items-center gap-3 mb-6">
            <div className="p-3 bg-green-500/10 rounded-lg">
              <Smartphone className="text-green-400" size={32} />
            </div>
            <h2 className="text-3xl md:text-4xl font-bold text-white">数字生活 TGI</h2>
          </div>
          <h3 className="text-xl text-green-200 mb-4">Target Group Index</h3>
          <p className="text-slate-300 leading-relaxed mb-6">
            线下行为只是冰山一角。通过分析群体在移动端的活跃特征，我们构建了更立体的画像。
          </p>
          <div className="bg-slate-800/50 p-6 rounded-xl border border-slate-700 mb-6">
             <h4 className="text-white font-bold mb-2">什么是 TGI？</h4>
             <p className="text-sm text-slate-400">
                Target Group Index = (目标群体占比 / 总体占比) × 100。<br/>
                TGI {'>'} 100 代表该群体具有显著特征。例如 TGI 120 的“外卖偏好”，意味着该区域人群点外卖的概率是平均水平的 1.2 倍。
             </p>
          </div>
          <p className="text-slate-400">
            涵盖维度：视频娱乐、生鲜电商、在线教育、金融理财、差旅出行等 30+ 细分领域。
          </p>
        </div>
        <div className="md:w-1/2 flex justify-center">
             {/* Radar Chart Simulation */}
             <div className="relative w-80 h-80 bg-slate-800 rounded-full border border-slate-700 flex items-center justify-center">
                <div className="absolute inset-0 border-[1px] border-slate-600 rounded-full scale-75"></div>
                <div className="absolute inset-0 border-[1px] border-slate-600 rounded-full scale-50"></div>
                <div className="absolute inset-0 border-[1px] border-slate-600 rounded-full scale-25"></div>
                
                {/* Radar Polygon */}
                <svg viewBox="0 0 100 100" className="w-full h-full absolute top-0 left-0 p-8 overflow-visible">
                   <polygon points="50,10 90,40 80,80 20,80 10,40" fill="rgba(74, 222, 128, 0.2)" stroke="#4ade80" strokeWidth="2" className="animate-pulse"/>
                   <circle cx="50" cy="10" r="2" fill="#fff" /><text x="50" y="5" fontSize="4" fill="#fff" textAnchor="middle">社交活跃</text>
                   <circle cx="90" cy="40" r="2" fill="#fff" /><text x="95" y="40" fontSize="4" fill="#fff">电商购物</text>
                   <circle cx="80" cy="80" r="2" fill="#fff" /><text x="85" y="85" fontSize="4" fill="#fff">房产关注</text>
                   <circle cx="20" cy="80" r="2" fill="#fff" /><text x="15" y="85" fontSize="4" fill="#fff" textAnchor="end">旅游出行</text>
                   <circle cx="10" cy="40" r="2" fill="#fff" /><text x="5" y="40" fontSize="4" fill="#fff" textAnchor="end">金融理财</text>
                </svg>
             </div>
        </div>
      </div>
    </div>
  );

  const SecuritySection = () => (
    <div className="min-h-screen flex items-center py-20 bg-black/40 border-t border-slate-800">
      <div className="container mx-auto px-6 text-center max-w-4xl">
        <div className="mb-12">
           <div className="inline-flex items-center justify-center p-4 bg-slate-800 rounded-full mb-6 border border-slate-700">
              <Shield size={48} className="text-blue-500" />
           </div>
           <h2 className="text-3xl md:text-5xl font-bold text-white mb-6">合规与隐私计算</h2>
           <div className="h-1 w-24 bg-blue-500 mx-auto mb-8"></div>
           <p className="text-xl text-slate-300">
             在数据价值释放与用户隐私保护之间，我们建立了坚不可摧的防火墙。
           </p>
        </div>

        <div className="grid grid-cols-1 md:grid-cols-3 gap-8 text-left">
           <div className="bg-slate-800 p-8 rounded-2xl border border-slate-700 hover:border-blue-500 transition-colors">
              <Fingerprint className="text-blue-400 mb-4" size={32}/>
              <h3 className="text-xl font-bold text-white mb-2">数据匿名化</h3>
              <p className="text-slate-400 text-sm">所有源数据在进入系统前即完成 ID 混淆与脱敏。我们只分析“群体”，从不识别“个体”。</p>
           </div>
           <div className="bg-slate-800 p-8 rounded-2xl border border-slate-700 hover:border-blue-500 transition-colors">
              <Lock className="text-blue-400 mb-4" size={32}/>
              <h3 className="text-xl font-bold text-white mb-2">多方安全计算 (MPC)</h3>
              <p className="text-slate-400 text-sm">数据“可用不可见”。在不交换原始数据的前提下，完成联合统计与建模分析。</p>
           </div>
           <div className="bg-slate-800 p-8 rounded-2xl border border-slate-700 hover:border-blue-500 transition-colors">
              <CheckCircle className="text-blue-400 mb-4" size={32}/>
              <h3 className="text-xl font-bold text-white mb-2">法律合规</h3>
              <p className="text-slate-400 text-sm">严格遵循《数据安全法》与《个人信息保护法》，定期通过第三方安全审计。</p>
           </div>
        </div>

        <div className="mt-16">
           <button onClick={startConfig} className="bg-blue-600 hover:bg-blue-500 text-white font-bold py-4 px-12 rounded-full text-lg shadow-lg shadow-blue-500/30 transition-all transform hover:scale-105">
             现在开始配置安全报告
           </button>
        </div>
      </div>
    </div>
  );

  const HomeView = () => (
    <div className="relative z-10">
      <HeroSection />
      <GridTechSection />
      <PurchasingPowerSection />
      <DigitalLifeSection />
      <SecuritySection />
    </div>
  );

  // --- Configuration Tool ---

  const ConfiguratorView = () => (
    <div className="min-h-screen pt-24 pb-12 px-4 md:px-8 relative z-20 bg-slate-900">
       <div className="max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-12 gap-8">
         
         {/* Left: Configuration Panel */}
         <div className="lg:col-span-7 space-y-6">
            <div className="flex items-center gap-4 mb-8">
              <button onClick={() => setViewMode('home')} className="text-slate-500 hover:text-white transition-colors">
                 &larr; 返回官网首页
              </button>
              <h2 className="text-2xl font-bold text-white">配置您的数据报告</h2>
            </div>

            {/* Base Module */}
            <div className="bg-slate-800 p-6 rounded-xl border border-cyan-500/50 relative overflow-hidden">
               <div className="absolute top-0 right-0 bg-cyan-600 text-white text-xs px-2 py-1">必选基础</div>
               <div className="flex justify-between items-start mb-4">
                 <div className="flex items-center gap-3">
                   <div className="p-2 bg-cyan-500/20 rounded-lg text-cyan-400"><Layers size={24}/></div>
                   <div>
                     <h3 className="text-lg font-bold text-white">基础底座</h3>
                     <p className="text-sm text-slate-400">区域客流总量 + 热力图分布 (Grid System)</p>
                   </div>
                 </div>
                 <div className="text-xl font-bold text-white">¥{PRICES.base}</div>
               </div>
            </div>

            {/* Optional Modules */}
            <div className="space-y-4">
              <p className="text-slate-400 text-sm uppercase tracking-wider font-semibold ml-1">增强模块</p>
              
              <label className={`block p-5 rounded-xl border cursor-pointer transition-all duration-200 ${modules.profile ? 'bg-slate-800 border-cyan-500' : 'bg-slate-800/40 border-slate-700 hover:border-slate-600'}`}>
                 <div className="flex items-center justify-between">
                    <div className="flex items-center gap-4">
                       <input type="checkbox" className="w-5 h-5 accent-cyan-500" checked={modules.profile} onChange={() => toggleModule('profile')} />
                       <div>
                          <div className="text-white font-semibold flex items-center gap-2"><Users size={16}/> 人群画像包</div>
                          <div className="text-xs text-slate-400 mt-1">性别 / 年龄段 / 人生阶段 / 婚姻</div>
                       </div>
                    </div>
                    <div className="text-cyan-400 font-mono">+¥{PRICES.profile}</div>
                 </div>
              </label>

              <label className={`block p-5 rounded-xl border cursor-pointer transition-all duration-200 ${modules.assets ? 'bg-slate-800 border-purple-500' : 'bg-slate-800/40 border-slate-700 hover:border-slate-600'}`}>
                 <div className="flex items-center justify-between">
                    <div className="flex items-center gap-4">
                       <input type="checkbox" className="w-5 h-5 accent-purple-500" checked={modules.assets} onChange={() => toggleModule('assets')} />
                       <div>
                          <div className="text-white font-semibold flex items-center gap-2"><TrendingUp size={16}/> 资产实力包 (PPI)</div>
                          <div className="text-xs text-slate-400 mt-1">常驻地房价估算 / 自有房概率 / 车型档次</div>
                       </div>
                    </div>
                    <div className="text-purple-400 font-mono">+¥{PRICES.assets}</div>
                 </div>
              </label>

              <label className={`block p-5 rounded-xl border cursor-pointer transition-all duration-200 ${modules.consumption ? 'bg-slate-800 border-cyan-500' : 'bg-slate-800/40 border-slate-700 hover:border-slate-600'}`}>
                 <div className="flex items-center justify-between">
                    <div className="flex items-center gap-4">
                       <input type="checkbox" className="w-5 h-5 accent-cyan-500" checked={modules.consumption} onChange={() => toggleModule('consumption')} />
                       <div>
                          <div className="text-white font-semibold flex items-center gap-2"><Zap size={16}/> 消费行为包</div>
                          <div className="text-xs text-slate-400 mt-1">月收入预测 / 月消费力 / 高频支付场景</div>
                       </div>
                    </div>
                    <div className="text-cyan-400 font-mono">+¥{PRICES.consumption}</div>
                 </div>
              </label>

               <label className={`block p-5 rounded-xl border cursor-pointer transition-all duration-200 ${modules.behavior ? 'bg-slate-800 border-green-500 shadow-[0_0_15px_rgba(74,222,128,0.1)]' : 'bg-slate-800/40 border-slate-700 hover:border-slate-600'}`}>
                 <div className="flex items-center justify-between">
                    <div className="flex items-center gap-4">
                       <input type="checkbox" className="w-5 h-5 accent-green-500" checked={modules.behavior} onChange={() => toggleModule('behavior')} />
                       <div>
                          <div className="text-white font-semibold flex items-center gap-2"><Smartphone size={16}/> 深度行为包 (TGI) <span className="text-xs bg-green-600 text-white px-2 py-0.5 rounded ml-2">核心竞争力</span></div>
                          <div className="text-xs text-slate-400 mt-1">APP生态活跃度 / 竞品排查 / 独立门店识别</div>
                       </div>
                    </div>
                    <div className="text-green-400 font-mono">+¥{PRICES.behavior}</div>
                 </div>
              </label>

               <div className="mt-8 pt-6 border-t border-slate-700">
                  <label className={`block p-5 rounded-xl border cursor-pointer transition-all duration-200 ${modules.expert ? 'bg-slate-800 border-yellow-500' : 'bg-slate-800/20 border-slate-700 hover:border-slate-600'}`}>
                     <div className="flex items-center justify-between">
                        <div className="flex items-center gap-4">
                           <input type="checkbox" className="w-5 h-5 accent-yellow-500" checked={modules.expert} onChange={() => toggleModule('expert')} />
                           <div>
                              <div className="text-yellow-400 font-semibold flex items-center gap-2"><Search size={16}/> 专家深度解读</div>
                              <div className="text-xs text-slate-400 mt-1">资深分析师介入，提供策略建议</div>
                           </div>
                        </div>
                        <div className="text-yellow-400 font-mono">+¥{PRICES.expert}</div>
                     </div>
                  </label>
               </div>

            </div>
         </div>

         {/* Right: Live Preview & Invoice */}
         <div className="lg:col-span-5 relative">
            <div className="sticky top-24 space-y-6">
               
               {/* Invoice Card */}
               <div className="bg-slate-800 rounded-xl p-6 border border-slate-700 shadow-2xl">
                  <h3 className="text-white font-bold mb-4 flex items-center gap-2"><Cpu size={18} /> 订单概览</h3>
                  <div className="space-y-2 mb-6 text-sm text-slate-300">
                     <div className="flex justify-between">
                        <span>基础服务费</span>
                        <span>¥{PRICES.base}</span>
                     </div>
                     {modules.profile && <div className="flex justify-between"><span>人群画像包</span><span>¥{PRICES.profile}</span></div>}
                     {modules.assets && <div className="flex justify-between"><span>资产实力包 (PPI)</span><span>¥{PRICES.assets}</span></div>}
                     {modules.consumption && <div className="flex justify-between"><span>消费行为包</span><span>¥{PRICES.consumption}</span></div>}
                     {modules.behavior && <div className="flex justify-between"><span>深度行为包 (TGI)</span><span>¥{PRICES.behavior}</span></div>}
                     {modules.expert && <div className="flex justify-between text-yellow-400"><span>专家解读服务</span><span>¥{PRICES.expert}</span></div>}
                  </div>
                  
                  <div className="border-t border-slate-700 pt-4 mb-6">
                     <div className="flex justify-between items-end mb-1">
                        <span className="text-slate-400 text-sm">原价</span>
                        <span className="text-slate-400 line-through decoration-slate-500">¥{totalPrice}</span>
                     </div>
                     <div className="flex justify-between items-end">
                        <span className="text-white font-bold">首单特惠 (5折)</span>
                        <span className="text-3xl font-bold text-cyan-400">¥{finalPrice}</span>
                     </div>
                  </div>

                  <button 
                     onClick={() => setShowResult(true)}
                     className={`w-full py-4 rounded-lg font-bold text-white shadow-lg transition-all transform hover:scale-[1.02] flex items-center justify-center gap-2 ${isEnterprise ? 'bg-gradient-to-r from-slate-700 to-slate-600 hover:from-slate-600 hover:to-slate-500 border border-yellow-500/50' : 'bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500'}`}
                  >
                     {isEnterprise ? (
                        <>预约高级顾问 <Building2 size={18}/></>
                     ) : (
                        <>立即生成报告 <Zap size={18}/></>
                     )}
                  </button>
                  {isEnterprise && <p className="text-center text-xs text-yellow-500 mt-2">您的需求涉及深度建模，将由大客户团队服务</p>}
               </div>

                {/* Result Overlay */}
                {showResult && (
                    <div className="absolute top-0 left-0 w-full h-full bg-slate-800/95 backdrop-blur-md rounded-xl flex flex-col items-center justify-center p-6 text-center border border-slate-600 animate-fade-in-up">
                        {isEnterprise ? (
                            <>
                                <Building2 size={48} className="text-yellow-500 mb-4" />
                                <h3 className="text-xl font-bold text-white mb-2">已预约大客户通道</h3>
                                <p className="text-sm text-slate-300 mb-4">工单号: #{Math.floor(Math.random() * 10000)}</p>
                                <input type="text" placeholder="您的联系电话" className="w-full mb-2 p-2 rounded bg-slate-900 border border-slate-600 text-white" />
                                <button className="bg-yellow-600 text-white px-6 py-2 rounded w-full">提交并等待回电</button>
                            </>
                        ) : (
                            <>
                                <CheckCircle size={48} className="text-green-500 mb-4" />
                                <h3 className="text-xl font-bold text-white mb-2">订单确认</h3>
                                <div className="bg-white p-2 rounded mb-4">
                                    <div className="w-24 h-24 bg-slate-200 flex items-center justify-center text-slate-500 text-xs">[二维码]</div>
                                </div>
                                <p className="text-sm text-slate-300">请扫码联系客服支付 ¥{finalPrice}</p>
                            </>
                        )}
                        <button onClick={() => setShowResult(false)} className="mt-4 text-xs text-slate-500 hover:text-white underline">返回修改</button>
                    </div>
                )}
            </div>
         </div>

       </div>
    </div>
  );

  return (
    <div className="font-sans antialiased text-slate-200 selection:bg-cyan-500/30 selection:text-white bg-slate-900 min-h-screen">
      <style>{`
        @keyframes fade-in-up {
          from { opacity: 0; transform: translateY(20px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in-up { animation: fade-in-up 0.8s ease-out forwards; }
        .delay-100 { animation-delay: 0.1s; }
        .delay-75 { animation-delay: 0.075s; }
        .delay-150 { animation-delay: 0.15s; }
        .drop-shadow-glow { text-shadow: 0 0 20px rgba(0,160,249,0.5); }
      `}</style>

      {/* Background */}
      <ParticleBackground />

      {/* Header */}
      <header className="fixed top-0 left-0 w-full z-50 bg-slate-900/80 backdrop-blur-md border-b border-white/5 transition-all duration-300">
        <div className="container mx-auto px-6 h-20 flex items-center justify-between">
          <div className="flex items-center gap-2 cursor-pointer" onClick={() => setViewMode('home')}>
             <AuraLogo className="h-10 w-auto" />
          </div>
          <nav className="hidden md:flex items-center gap-8 text-sm font-medium text-slate-300">
            {viewMode === 'home' && (
                <>
                    <button onClick={() => document.getElementById('grid-tech').scrollIntoView({behavior: 'smooth'})} className="hover:text-cyan-400 transition-colors">核心技术</button>
                    <button onClick={() => window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' })} className="hover:text-cyan-400 transition-colors">数据合规</button>
                </>
            )}
            <button className="text-cyan-400 border border-cyan-500/50 px-4 py-2 rounded hover:bg-cyan-500/10 transition-colors">
                登录控制台
            </button>
          </nav>
        </div>
      </header>

      {/* Page Content */}
      <main>
        {viewMode === 'home' && <HomeView />}
        {viewMode === 'config' && <ConfiguratorView />}
      </main>

      {/* Footer */}
      <footer className="relative z-10 bg-black py-12 border-t border-slate-800">
         <div className="container mx-auto px-6 text-center">
            <p className="text-slate-600 text-xs mb-2">
                本站所有数据经过严格脱敏处理，符合《数据安全法》相关规定。
            </p>
            <p className="text-slate-700 text-xs">
                © 2026 AuraData Technology Co., Ltd. All rights reserved.
            </p>
         </div>
      </footer>
    </div>
  );
}